---
import Layout from '@/layouts/default.astro'
import Discord from '@/components/icons/discord.astro'
import { DISCORD_INVITE } from '@/lib/const'
import { ArrowRightIcon } from 'lucide-react'
import { getCollection } from 'astro:content'
import { Image } from 'astro:assets'

const games = await getCollection('games')
---

<Layout title="Souls Speedruns">
	<main class="container mx-auto mt-16 py-2">
		<div class="px-2 py-12 sm:px-6 lg:px-8">
			<div class="mx-auto max-w-2xl text-center">
				<h2
					class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl"
				>
					The reference for<br />Souls Speedrunning
				</h2>
			</div>
			<div class="mt-10 flex items-center justify-center gap-x-6">
				<a
					href={DISCORD_INVITE}
					target="_blank"
					class="flex items-center gap-2"
				>
					<Discord class="h-4 w-4" />
					 Discord
				</a>
				<a
					href="/getting-started"
					class="group flex items-center gap-2"
				>
					Getting started
					<ArrowRightIcon
						className="h-4 w-4 transition-transform group-hover:translate-x-1"
					/>
				</a>
			</div>
		</div>
		<section class="grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3">
			{
				games.map((game) => (
					<a
						href={`/${game.data.homepage.slug}`}
						rel="prefetch"
						class="group relative aspect-video overflow-hidden rounded-lg"
					>
						<div class="absolute inset-0 bg-black" />
						<Image
							src={game.data.assets.background}
							width={240}
							height={135}
							alt={`Background image of ${game.data.name}`}
							class="h-full w-full scale-100 object-fill transition-transform duration-100 group-hover:scale-105"
						/>
						<div class="absolute inset-0 flex items-center justify-center bg-black/25 p-6 text-center">
							<h2 class="text-xl font-bold text-white">{game.data.name}</h2>
						</div>
					</a>
				))
			}
		</section>
	</main>
</Layout>
